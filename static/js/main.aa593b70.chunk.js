(this["webpackJsonpbits-to-atoms"]=this["webpackJsonpbits-to-atoms"]||[]).push([[0],{1049:function(e,t){},1103:function(e,t){},1104:function(e,t){},1199:function(e,t){},1201:function(e,t){},1257:function(e,t){},1316:function(e,t){},1325:function(e,t){},1327:function(e,t){},1425:function(e,t){},1494:function(e,t){},1513:function(e,t){},1515:function(e,t){},1542:function(e,t){},1708:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(57),o=a.n(i),c=a(33),s=a(1),l=a.n(s),u=a(95),d=a(51),m=a(675),v=a(23),p=a(655),f=Object(u.b)({name:"textile",initialState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detailsVisible,a=void 0!==t&&t,r=e.user,n=void 0===r?void 0:r;return{detailsVisible:a,user:n}}(),reducers:{showUserDetails:function(e,t){e.detailsVisible=!0},hideUserDetails:function(e,t){e.detailsVisible=!1},setUser:function(e,t){e.user=t.payload}}}),y=f.actions,b=y.showUserDetails,h=y.hideUserDetails,g=y.setUser,x=f.reducer,O=l.a.mark(w);function w(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Generating user identity..."),e=p.PrivateKey.fromRandom(),t.next=4,Object(v.d)(g({privateKey:e}));case 4:case"end":return t.stop()}}),O)}var E,j={topNav:{gitHubURL:"https://github.com/thomas-gale/bits-to-atoms"},information:{gitHubAPILatestReleaseEndPoint:"https://api.github.com/repos/thomas-gale/bits-to-atoms/releases/latest"},market:{simpleMarketSaga:{partNames:["widget","thingy","thingybob","whatchamacallit","thingamajig","doohickey","doofery","thatthing"],partValueRange:{min:5,max:10},maxNumberOpenRequests:3,processingDelayRange:{min:1e4,max:2e4}}},factory:{updatePeriodMs:1e3,maxNumberActiveBuilds:1}};!function(e){e.Spool="Spool",e.RoughCube="RoughCube",e.Cube="Cube",e.RoughCylinder="RoughCylinder",e.Cylinder="Cylinder"}(E||(E={}));var k=a(1760);function S(){return Object(k.a)()}var P,N=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-liquid-asset":r,i=e.value,o=void 0===i?{dollars:500}:i;return{id:a,displayName:n,value:o}}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.costPerMass,a=void 0===t?B({value:{dollars:10}}):t;return{type:P.SimplePolymer,costPerMass:a}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-build-request":r,i=e.created,o=void 0===i?new Date:i,c=e.material,s=void 0===c?q():c,l=e.endShape,u=void 0===l?E.Cube:l,d=e.scale,m=void 0===d?.01:d,v=e.fixedValue,p=void 0===v?B({value:{dollars:20}}):v,f=e.workflow,y=void 0===f?void 0:f;return{id:a,displayName:n,created:o,material:s,endShape:u,scale:m,fixedValue:p,workflow:y}}!function(e){e.SimplePolymer="SimplePolymer"}(P||(P={}));var T,R,C=a(90),F=a(48);!function(e){e.Transportation="Transportation",e.Transmutation="Transmutation",e.Storage="Storage"}(T||(T={})),function(e){e.BasicShapeType="BasicShapeType",e.LiquidAssetType="LiquidAssetType"}(R||(R={}));var I=new C.c.Entity("assets"),z=new C.c.Entity("serviceProviders"),M=new C.c.Entity("activities",{serviceProvider:z},{});M.define({previousActivity:M,nextActivity:M});var V,D=new C.c.Entity("workflows",{activities:[M],firstActivity:M},{}),U={liquidAsset:I,fixedAssets:[I],serviceProviders:[z],buildRequests:[new C.c.Entity("buildRequests",{workflow:D,firstActivity:M},{})]},H=function(e){return e.factory.entities.serviceProviders},L=Object(F.a)([function(e){return e.factory.result.id},function(e){return e.factory.result.displayName}],(function(e,t){return{id:e||"undefined",displayName:t||"undefined"}})),G=Object(F.a)([function(e){return e.factory.result.liquidAsset},function(e){return e.factory.entities.assets}],(function(e,t){return Object(C.a)({liquidAsset:e},U,{assets:t}).liquidAsset})),W=Object(F.a)([function(e){return e.factory.result.buildRequests},function(e){return e.factory.entities.activities},function(e){return e.factory.entities.buildRequests},H,function(e){return e.factory.entities.workflows}],(function(e,t,a,r,n){return Object(C.a)({buildRequests:e},U,{activities:t,buildRequests:a,serviceProviders:r,workflows:n}).buildRequests})),Q=Object(F.a)([W],(function(e){return e.length<j.factory.maxNumberActiveBuilds})),_=Object(F.a)([function(e){return e.factory.result.serviceProviders},H],(function(e,t){return Object(C.a)({serviceProviders:e},U,{serviceProviders:t}).serviceProviders})),K=(Object(F.a)([_],(function(e){return e.filter((function(e){return void 0!==e.capabilities.find((function(e){return e===T.Transmutation}))}))})),Object(F.a)([_],(function(e){var t=0;return e.forEach((function(e){t+=e.currentCostPerTime.value.dollars})),B({value:{dollars:t}})}))),J=Object(F.a)([G,_],(function(e,t){var a=0;return t.forEach((function(e){a+=e.currentCostPerTime.value.dollars})),{currentAssetsValue:e,totalOut:B({value:{dollars:a}}),totalIn:B({value:{dollars:0}})}})),Y=a(47),$=a(25),X=a(35);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,a=void 0===t?0:t,r=e.y,n=void 0===r?0:r,i=e.z,o=void 0===i?0:i;return{x:a,y:n,z:o}}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,a=void 0===t?0:t,r=e.y,n=void 0===r?0:r,i=e.z,o=void 0===i?0:i,c=e.w,s=void 0===c?1:c;return{x:a,y:n,z:o,w:s}}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.min,a=void 0===t?Z():t,r=e.max,n=void 0===r?Z({x:1,y:1,z:1}):r;return{min:a,max:n}}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shape,a=void 0===t?E.Cube:t;return{type:R.BasicShapeType,shape:a}}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.liquidAsset,a=void 0===t?B():t;return{type:R.LiquidAssetType,liquidAsset:a}}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,a=void 0===t?ae():t,r=e.end,n=void 0===r?ae():r;return{start:a,end:n}}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-dispatch-service":r,i=e.capabilities,o=void 0===i?[T.Transmutation]:i,c=e.canBid,s=void 0===c||c,l=e.currentActivity,u=void 0===l?void 0:l,d=e.location,m=void 0===d?Z():d,v=e.orientation,p=void 0===v?ee():v,f=e.bounds,y=void 0===f?te():f,b=e.currentCostPerTime,h=void 0===b?B({value:{dollars:1e-6}}):b,g=e.supportedTransmutationTransitions,x=void 0===g?[ne({start:ae({shape:E.Cube}),end:re({liquidAsset:B({value:{dollars:5}})})}),ne({start:ae({shape:E.Cylinder}),end:re({liquidAsset:B({value:{dollars:10}})})})]:g,O=e.supportedMaterials,w=void 0===O?[P.SimplePolymer]:O,j=e.outputVolume,k=void 0===j?void 0:j;return{type:V.Dispatch,id:a,displayName:n,capabilities:o,canBid:s,currentActivity:u,location:m,orientation:p,bounds:y,currentCostPerTime:h,supportedTransmutationTransitions:x,supportedMaterials:w,outputVolume:k}}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-fff-printer":r,i=e.capabilities,o=void 0===i?[T.Transmutation]:i,c=e.canBid,s=void 0===c||c,l=e.currentActivity,u=void 0===l?void 0:l,d=e.location,m=void 0===d?Z():d,v=e.orientation,p=void 0===v?ee():v,f=e.bounds,y=void 0===f?te({min:Z({x:-.5,y:-.5}),max:Z({x:.5,y:.5,z:1})}):f,b=e.currentCostPerTime,h=void 0===b?B({value:{dollars:1e-6}}):b,g=e.supportedTransmutationTransitions,x=void 0===g?[ne({start:ae({shape:E.Spool}),end:ae({shape:E.RoughCube})}),ne({start:ae({shape:E.Spool}),end:ae({shape:E.RoughCylinder})})]:g,O=e.supportedMaterials,w=void 0===O?[P.SimplePolymer]:O,j=e.outputVolume,k=void 0===j?te():j;return{type:V.FFFPrinter,id:a,displayName:n,capabilities:o,canBid:s,currentActivity:u,location:m,orientation:p,bounds:y,currentCostPerTime:h,supportedTransmutationTransitions:x,supportedMaterials:w,outputVolume:k}}!function(e){e.Procurement="Procurement",e.Floorspace="Floorspace",e.HumanWorker="HumanWorker",e.FFFPrinter="FFFPrinter",e.Dispatch="Dispatch"}(V||(V={}));var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-floorspace":r,i=e.capabilities,o=void 0===i?[T.Storage]:i,c=e.canBid,s=void 0===c||c,l=e.currentActivity,u=void 0===l?void 0:l,d=e.location,m=void 0===d?Z():d,v=e.orientation,p=void 0===v?ee():v,f=e.bounds,y=void 0===f?te({min:Z({x:-4,y:-2}),max:Z({x:4,y:2,z:2})}):f,b=e.currentCostPerTime,h=void 0===b?B({value:{dollars:1e-6}}):b;return{type:V.Floorspace,id:a,displayName:n,capabilities:o,canBid:s,currentActivity:u,location:m,orientation:p,bounds:y,currentCostPerTime:h}};function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-humanworker":r,i=e.capabilities,o=void 0===i?[T.Transportation,T.Transmutation]:i,c=e.canBid,s=void 0===c||c,l=e.currentActivity,u=void 0===l?void 0:l,d=e.location,m=void 0===d?Z():d,v=e.orientation,p=void 0===v?ee():v,f=e.bounds,y=void 0===f?te({min:Z({x:-.2,y:-.2}),max:Z({x:.2,y:.2,z:1.5})}):f,b=e.currentCostPerTime,h=void 0===b?B({value:{dollars:1e-6}}):b,g=e.capactityMass,x=void 0===g?5:g,O=e.movementVelocity,w=void 0===O?.5:O,j=e.supportedTransmutationTransitions,k=void 0===j?[ne({start:ae({shape:E.RoughCube}),end:ae({shape:E.Cube})}),ne({start:ae({shape:E.RoughCylinder}),end:ae({shape:E.Cylinder})})]:j,N=e.supportedMaterials,q=void 0===N?[P.SimplePolymer]:N,A=e.outputVolume,R=void 0===A?te():A;return{type:V.HumanWorker,id:a,displayName:n,capabilities:o,canBid:s,currentActivity:u,location:m,orientation:p,bounds:y,currentCostPerTime:h,capactityMass:x,movementVelocity:w,supportedTransmutationTransitions:k,supportedMaterials:q,outputVolume:R}}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-procurement-service":r,i=e.capabilities,o=void 0===i?[T.Transmutation]:i,c=e.canBid,s=void 0===c||c,l=e.currentActivity,u=void 0===l?void 0:l,d=e.location,m=void 0===d?Z():d,v=e.orientation,p=void 0===v?ee():v,f=e.bounds,y=void 0===f?te():f,b=e.currentCostPerTime,h=void 0===b?B({value:{dollars:1e-6}}):b,g=e.supportedTransmutationTransitions,x=void 0===g?[ne({start:re({liquidAsset:B({value:{dollars:2}})}),end:ae({shape:E.Spool})})]:g,O=e.supportedMaterials,w=void 0===O?[P.SimplePolymer]:O,j=e.outputVolume,k=void 0===j?void 0:j;return{type:V.Procurement,id:a,displayName:n,capabilities:o,canBid:s,currentActivity:u,location:m,orientation:p,bounds:y,currentCostPerTime:h,supportedTransmutationTransitions:x,supportedMaterials:w,outputVolume:k}}var ue=Object(u.b)({name:"factory",initialState:Object(C.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-factory":r,i=e.liquidAsset,o=void 0===i?B():i,c=e.fixedAssets,s=void 0===c?[]:c,l=e.buildRequests,u=void 0===l?[]:l,d=e.serviceProviders,m=void 0===d?[ce({displayName:"Floorspace 1"}),le({displayName:"Procurement 1",location:Z({x:-3,y:2.5}),bounds:te({min:Z({x:-1,y:-.5}),max:Z({x:1,y:.5,z:.1})})}),se({displayName:"Human 1",location:Z({x:3,y:1})}),oe({displayName:"Printer 1",location:Z({x:0,y:-1})}),ie({displayName:"Dispatch 1",location:Z({x:3,y:2.5}),bounds:te({min:Z({x:-1,y:-.5}),max:Z({x:1,y:.5,z:.1})})})]:d;return{id:a,displayName:n,liquidAsset:o,fixedAssets:s,buildRequests:u,serviceProviders:m}}(),U),reducers:{setDisplayName:function(e,t){e.result.displayName=t.payload},setLiquidAssetDollars:function(e,t){e.entities=Object(X.a)(Object(X.a)({},e.entities),{},{assets:Object(X.a)(Object(X.a)({},e.entities.assets),{},Object($.a)({},e.result.liquidAsset,Object(X.a)(Object(X.a)({},e.entities.assets?e.entities.assets[e.result.liquidAsset]:{}),{},{dollars:t.payload})))})},addBuildRequest:function(e,t){e.entities=Object(X.a)(Object(X.a)({},e.entities),{},{buildRequests:Object(X.a)(Object(X.a)({},e.entities.buildRequests),{},Object($.a)({},t.payload.id,t.payload))}),e.result=Object(X.a)(Object(X.a)({},e.result),{},{buildRequests:[].concat(Object(Y.a)(e.result.buildRequests),[t.payload.id])})},updateBuildRequestWorkflow:function(e,t){var a=Object(C.b)(t.payload.workflow,D);e.entities=Object(X.a)(Object(X.a)({},e.entities),{},{buildRequests:Object(X.a)(Object(X.a)({},e.entities.buildRequests),{},Object($.a)({},t.payload.buildRequestId,Object(X.a)(Object(X.a)({},e.entities.buildRequests?e.entities.buildRequests[t.payload.buildRequestId]:{}),{},{workflow:t.payload.workflow.id}))),activities:Object(X.a)(Object(X.a)({},e.entities.activities),a.entities.activities),serviceProviders:Object(X.a)(Object(X.a)({},e.entities.serviceProviders),a.entities.serviceProviders),workflows:Object(X.a)(Object(X.a)({},e.entities.workflows),a.entities.workflows)})},requestFullfillmentOfActivity:function(e,t){},offerFullfillmentOfActivity:function(e,t){},acceptFullfillmentOfActivity:function(e,t){},updateActivity:function(e,t){var a=Object(C.b)(t.payload,M);e.entities=Object(X.a)(Object(X.a)({},e.entities),{},{activities:Object(X.a)(Object(X.a)({},e.entities.activities),a.entities.activities),serviceProviders:Object(X.a)(Object(X.a)({},e.entities.serviceProviders),a.entities.serviceProviders)})},removeBuildRequest:function(e,t){console.error("Not Implemented")},setServiceProviderParameter:function(e,t){if(e.entities.serviceProviders&&t.payload.serviceProviderId in e.entities.serviceProviders){var a=e.entities.serviceProviders[t.payload.serviceProviderId];1===t.payload.serviceProviderProperty.length?a[t.payload.serviceProviderProperty[0]]=t.payload.parameter.value:2===t.payload.serviceProviderProperty.length?a[t.payload.serviceProviderProperty[0]][t.payload.serviceProviderProperty[1]]=t.payload.parameter.value:console.error("Unable to setServiceProviderParameter (serviceProviderProperty array unexpected depth)")}else console.error("Unable to update service provider parameter, service provider ".concat(t.payload.serviceProviderId," not found"))}}}),de=ue.actions,me=(de.setDisplayName,de.setLiquidAssetDollars),ve=de.addBuildRequest,pe=de.updateBuildRequestWorkflow,fe=de.requestFullfillmentOfActivity,ye=de.offerFullfillmentOfActivity,be=de.acceptFullfillmentOfActivity,he=de.updateActivity,ge=(de.removeBuildRequest,de.setServiceProviderParameter),xe=ue.reducer,Oe=function(e){return e.market},we=(Object(F.a)([Oe],(function(e){return e.visible})),Object(F.a)([Oe],(function(e){return e.buildRequests}))),Ee=Object(u.b)({name:"market",initialState:{visible:!0,buildRequests:[]},reducers:{requestBidBuildRequest:function(e,t){},addBuildRequest:function(e,t){e.buildRequests.push(t.payload)},removeBuildRequest:function(e,t){var a=e.buildRequests.findIndex((function(e){return e.id===t.payload}));-1!==a?e.buildRequests.splice(a,1):console.error("Unable to remove build request ".concat(t.payload))}}}),je=Ee.actions,ke=je.requestBidBuildRequest,Se=je.addBuildRequest,Pe=je.removeBuildRequest,Ne=Ee.reducer,Be=l.a.mark(Ce),qe=l.a.mark(Fe),Ae=l.a.mark(Ie);function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.partNames,a=void 0===t?j.market.simpleMarketSaga.partNames:t;return a[Math.floor(Math.random()*a.length)]}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.min,a=void 0===t?5:t,r=e.max,n=void 0===r?10:r;return Math.floor(Math.random()*(n-a)+a)}function Ce(){var e,t,a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("Starting Simple Market");case 1:return r.next=4,Object(v.e)(we);case 4:if(!((e=r.sent).length>=j.market.simpleMarketSaga.maxNumberOpenRequests)){r.next=11;break}return t=e.reduce((function(e,t){return e.created<t.created?e:t})),r.next=9,Object(v.d)(Pe(t.id));case 9:r.next=14;break;case 11:return a=Re(j.market.simpleMarketSaga.partValueRange),r.next=14,Object(v.d)(Se(A({displayName:Te(),material:q(),fixedValue:B({value:{dollars:a}}),scale:.01*a})));case 14:return r.next=16,Object(v.b)(Re(j.market.simpleMarketSaga.processingDelayRange));case 16:r.next=1;break;case 18:case"end":return r.stop()}}),Be)}function Fe(e){var t;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(v.e)(Q);case 3:if(!a.sent){a.next=9;break}return a.next=7,Object(v.d)(Pe(t.id));case 7:return a.next=9,Object(v.d)(ve(t));case 9:case"end":return a.stop()}}),qe)}function Ie(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(ke.type,Fe);case 2:case"end":return e.stop()}}),Ae)}var ze,Me=a(1761);!function(e){e.None="None",e.Market="Market",e.Factory="Factory"}(ze||(ze={}));var Ve=Object(u.b)({name:"selected",initialState:{marketFactoryPanelVisibilty:ze.Market,primaryFocusBuildRequestId:void 0,selectedServiceProviderId:void 0},reducers:{setMarketFactoryPanelVisibilty:function(e,t){e.marketFactoryPanelVisibilty=t.payload},unSelectPrimaryFocusBuildRequest:function(e,t){e.primaryFocusBuildRequestId=void 0},setSelectedPrimaryFocusBuildRequest:function(e,t){e.primaryFocusBuildRequestId=t.payload},unSelectServiceProvider:function(e,t){e.selectedServiceProviderId=void 0},setSelectedServiceProvider:function(e,t){e.selectedServiceProviderId=t.payload}}}),De=Ve.actions,Ue=De.setMarketFactoryPanelVisibilty,He=De.unSelectPrimaryFocusBuildRequest,Le=De.setSelectedPrimaryFocusBuildRequest,Ge=De.unSelectServiceProvider,We=De.setSelectedServiceProvider,Qe=Ve.reducer;function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-transportation-activity":r,i=e.serviceProvider,o=void 0===i?void 0:i,c=e.started,s=void 0===c?void 0:c,l=e.completed,u=void 0===l?void 0:l,d=e.previousActivity,m=void 0===d?void 0:d,v=e.nextActivity,p=void 0===v?void 0:v,f=e.startLocation,y=void 0===f?Z():f,b=e.endLocation,h=void 0===b?Z():b;return{type:T.Transportation,id:a,displayName:n,serviceProvider:o,started:s,completed:u,previousActivity:m,nextActivity:p,startLocation:y,endLocation:h}}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-transmutation-activity":r,i=e.serviceProvider,o=void 0===i?void 0:i,c=e.started,s=void 0===c?void 0:c,l=e.completed,u=void 0===l?void 0:l,d=e.previousActivity,m=void 0===d?void 0:d,v=e.nextActivity,p=void 0===v?void 0:v,f=e.material,y=void 0===f?P.SimplePolymer:f,b=e.startState,h=void 0===b?void 0:b,g=e.endState,x=void 0===g?void 0:g;return{type:T.Transmutation,id:a,displayName:n,serviceProvider:o,started:s,completed:u,previousActivity:m,nextActivity:p,material:y,startState:h,endState:x}}function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-workflow":r,i=e.activities,o=void 0===i?[]:i,c=e.firstActivity,s=void 0===c?void 0:c;return{id:a,displayName:n,activities:o,firstActivity:s}}var Ye=l.a.mark(et),$e=l.a.mark(tt),Xe=l.a.mark(at),Ze=l.a.mark(rt);function et(){var e,t,a,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=j.factory.updatePeriodMs,console.log("Starting endless factory tick saga (with period length of ".concat(e,"ms)"));case 2:return n.next=5,Object(v.b)(e);case 5:return n.next=7,Object(v.e)(G);case 7:return t=n.sent,n.next=10,Object(v.e)(K);case 10:return a=n.sent,r=a.value.dollars*e,n.next=14,Object(v.d)(me(t.value.dollars-r));case 14:n.next=2;break;case 16:case"end":return n.stop()}}),Ye)}function tt(e){var t;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Requesting fullfillment for activity ".concat(e.id)),a.next=3,Object(v.d)(fe(e));case 3:return a.next=6,Object(v.f)(ye.type);case 6:if((t=a.sent).payload.activity.id!==e.id){a.next=9;break}return a.abrupt("break",11);case 9:a.next=3;break;case 11:return a.abrupt("return",t);case 12:case"end":return a.stop()}}),$e)}function at(e){var t,a,r,n,i,o,c,s,u,d,m,p,f,y,b,h;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload,console.log("Computing the required workflow for build request ".concat(t.id," (given the current active transmutation service providers in the factory)")),t.material.type===P.SimplePolymer&&t.endShape===E.Cube){l.next=5;break}return console.error("Unable to compute workflow for this material type / shape."),l.abrupt("return");case 5:return a=Je(),r=ae({shape:t.endShape}),i=Ke({displayName:"Dispatch Part",startState:r,endState:re({liquidAsset:t.fixedValue})}),l.next=10,tt(i);case 10:o=l.sent,i.serviceProvider=o.payload.serviceProvider,a.activities.push(i),n=i;case 14:return i=Ke({displayName:"Transmute Part",endState:r}),l.next=18,tt(i);case 18:if(c=l.sent,s=c.payload.serviceProvider,(u=c.payload.activity).startState){l.next=24;break}return console.error("Transmutation fullfillment offer does not specify the start topology"),l.abrupt("return");case 24:if(i.serviceProvider=s,i.nextActivity=n,n.previousActivity=i,a.activities.push(i),u.startState.type!==R.BasicShapeType){l.next=33;break}r=u.startState,n=i,l.next=37;break;case 33:return console.log("Transmutation list complete (current transmutation does not start with basic shape topology)"),i.displayName="Procure Part",a.firstActivity=i,l.abrupt("break",39);case 37:l.next=14;break;case 39:if(!i.nextActivity){l.next=59;break}if(d=i.serviceProvider,m=i.nextActivity.serviceProvider,d&&m){l.next=45;break}return console.error("Start or end transmutation activity does not have an associated service provider..."),l.abrupt("break",59);case 45:return p=_e({displayName:"Transport Part",startLocation:d.location,endLocation:m.location}),l.next=48,tt(p);case 48:f=l.sent,y=f.payload.serviceProvider,p.serviceProvider=y,p.previousActivity=i,p.nextActivity=i.nextActivity,a.activities.push(p),i.nextActivity=p,p.nextActivity.previousActivity=p,i=p.nextActivity,l.next=39;break;case 59:return console.log("Proposed workflow computed! Id: ".concat(a.id," with ").concat(a.activities.length," steps")),l.next=62,Object(v.d)(pe({buildRequestId:t.id,workflow:a}));case 62:b=a.firstActivity;case 63:if(b.serviceProvider){l.next=67;break}return console.error("Unabled to find current executing activities service provider"),l.abrupt("break",82);case 67:return l.next=69,Object(v.d)(be({serviceProvider:b.serviceProvider,activity:b}));case 69:return l.next=72,Object(v.f)(he.type);case 72:if((h=l.sent).payload.id!==b.id||!h.payload.completed){l.next=75;break}return l.abrupt("break",77);case 75:l.next=69;break;case 77:if(b.nextActivity){l.next=79;break}return l.abrupt("break",82);case 79:b=b.nextActivity,l.next=63;break;case 82:console.log("Completed workflow ".concat(a.id));case 83:case"end":return l.stop()}}),Xe)}function rt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(ve.type,at);case 2:case"end":return e.stop()}}),Ze)}var nt=l.a.mark(st),it=l.a.mark(lt),ot=l.a.mark(ut),ct=l.a.mark(dt);function st(e){var t,a,r,n,i,o;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(v.e)(_);case 3:if(a=c.sent,r=a.filter((function(e){return e.type===V.Procurement})),n=r.filter((function(e){return e.canBid})),i=n.length>0?n[0]:void 0){c.next=10;break}return console.warn("Unable to generate bid for activity ".concat(t.id,", no procurement services available")),c.abrupt("return");case 10:if(t.type!==T.Transmutation){c.next=21;break}if(!(o=i.supportedTransmutationTransitions.find((function(e){return e.end.type===R.BasicShapeType&&t.endState&&t.endState.type===R.BasicShapeType&&t.endState.shape===e.end.shape})))){c.next=21;break}if(console.log("Procurement service ".concat(i.id," will offer fullfillment for this transmutation activity. (It will not append any required input topology, as it will just require liquid assets)")),o.start.type!==R.LiquidAssetType){c.next=20;break}return t.startState=o.start,c.next=18,Object(v.d)(ye({serviceProvider:i,activity:t}));case 18:c.next=21;break;case 20:console.error("Procurement service ".concat(i.id," has misconfigured transmutation transition start type (should be liquid asset)"));case 21:case"end":return c.stop()}}),nt)}function lt(e){var t,a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.payload.serviceProvider.type===V.Procurement){r.next=2;break}return r.abrupt("return");case 2:return t=e.payload.serviceProvider,(a=e.payload.activity).started=new Date,console.log("Procurement service ".concat(t.id," starting to execute transmutation activity ").concat(a.id)),r.next=8,Object(v.b)(1e3);case 8:return a.completed=new Date,r.next=11,Object(v.d)(he(a));case 11:case"end":return r.stop()}}),it)}function ut(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(fe.type,st);case 2:case"end":return e.stop()}}),ot)}function dt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(be.type,lt);case 2:case"end":return e.stop()}}),ct)}var mt=l.a.mark(ht),vt=l.a.mark(gt),pt=l.a.mark(xt),ft=l.a.mark(Ot),yt=l.a.mark(wt),bt=l.a.mark(Et);function ht(e){var t,a,r,n,i,o;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(v.e)(_);case 3:if(a=c.sent,r=a.filter((function(e){return e.type===V.HumanWorker})),n=r.filter((function(e){return e.canBid})),i=n.length>0?n[0]:void 0){c.next=10;break}return console.warn("Unable to generate bid for activity ".concat(t.id,", no human workers available")),c.abrupt("return");case 10:if(t.type!==T.Transportation){c.next=16;break}return console.log("Human worker service ".concat(i.id," will offer fullfillment for this transportation activity")),c.next=14,Object(v.d)(ye({serviceProvider:i,activity:t}));case 14:c.next=27;break;case 16:if(t.type!==T.Transmutation){c.next=27;break}if(!(o=i.supportedTransmutationTransitions.find((function(e){return e.end.type===R.BasicShapeType&&t.endState&&t.endState.type===R.BasicShapeType&&t.endState.shape===e.end.shape})))){c.next=27;break}if(console.log("Human worker service ".concat(i.id," will offer fullfillment for this transmutation activity. (Appending required input topology)")),o.start.type!==R.BasicShapeType){c.next=26;break}return t.startState=ae({shape:o.start.shape}),c.next=24,Object(v.d)(ye({serviceProvider:i,activity:t}));case 24:c.next=27;break;case 26:console.error("Human worker service ".concat(i.id," has misconfigured TopologyTransition start type"));case 27:case"end":return c.stop()}}),mt)}function gt(e,t){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.started=new Date,console.log("Human worker service ".concat(e.id," starting to execute transportation activity ").concat(t.id)),a.next=4,Object(v.b)(1e3);case 4:return t.completed=new Date,a.next=7,Object(v.d)(he(t));case 7:case"end":return a.stop()}}),vt)}function xt(e,t){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.started=new Date,console.log("Human worker service ".concat(e.id," starting to execute transmutation activity ").concat(t.id)),a.next=4,Object(v.b)(1e3);case 4:return t.completed=new Date,a.next=7,Object(v.d)(he(t));case 7:case"end":return a.stop()}}),pt)}function Ot(e){var t;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.payload.serviceProvider.type===V.HumanWorker){a.next=2;break}return a.abrupt("return");case 2:t=e.payload.serviceProvider,a.t0=e.payload.activity.type,a.next=a.t0===T.Transportation?6:a.t0===T.Transmutation?9:12;break;case 6:return a.next=8,gt(t,e.payload.activity);case 8:return a.abrupt("break",14);case 9:return a.next=11,xt(t,e.payload.activity);case 11:return a.abrupt("break",14);case 12:return console.error("Unsupported activity type for Human Worker"),a.abrupt("return");case 14:case"end":return a.stop()}}),ft)}function wt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(fe.type,ht);case 2:case"end":return e.stop()}}),yt)}function Et(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(be.type,Ot);case 2:case"end":return e.stop()}}),bt)}var jt=l.a.mark(Nt),kt=l.a.mark(Bt),St=l.a.mark(qt),Pt=l.a.mark(At);function Nt(e){var t,a,r,n,i,o;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(v.e)(_);case 3:if(a=c.sent,r=a.filter((function(e){return e.type===V.FFFPrinter})),n=r.filter((function(e){return e.canBid})),i=n.length>0?n[0]:void 0){c.next=10;break}return console.warn("Unable to generate bid for activity ".concat(t.id,", no fff printers available")),c.abrupt("return");case 10:if(t.type!==T.Transmutation){c.next=21;break}if(!(o=i.supportedTransmutationTransitions.find((function(e){return e.end.type===R.BasicShapeType&&t.endState&&t.endState.type===R.BasicShapeType&&t.endState.shape===e.end.shape})))){c.next=21;break}if(console.log("FFF printer service ".concat(i.id," will offer fullfillment for this transmutation activity . (Appending required input topology)")),o.start.type!==R.BasicShapeType){c.next=20;break}return t.startState=ae({shape:o.start.shape}),c.next=18,Object(v.d)(ye({serviceProvider:i,activity:t}));case 18:c.next=21;break;case 20:console.error("FFF printer service ".concat(i.id," has misconfigured TopologyTransition start type"));case 21:case"end":return c.stop()}}),jt)}function Bt(e){var t,a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.payload.serviceProvider.type===V.FFFPrinter){r.next=2;break}return r.abrupt("return");case 2:return t=e.payload.serviceProvider,(a=e.payload.activity).started=new Date,console.log("FFF printer service ".concat(t.id," starting to execute transmutation activity ").concat(a.id)),r.next=8,Object(v.b)(1e3);case 8:return a.completed=new Date,r.next=11,Object(v.d)(he(a));case 11:case"end":return r.stop()}}),kt)}function qt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(fe.type,Nt);case 2:case"end":return e.stop()}}),St)}function At(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(be.type,Bt);case 2:case"end":return e.stop()}}),Pt)}var Tt=l.a.mark(It),Rt=l.a.mark(zt),Ct=l.a.mark(Mt),Ft=l.a.mark(Vt);function It(e){var t,a,r,n,i;return l.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.next=3,Object(v.e)(_);case 3:if(a=o.sent,r=a.filter((function(e){return e.type===V.Dispatch})),n=r.filter((function(e){return e.canBid})),i=n.length>0?n[0]:void 0){o.next=10;break}return console.warn("Unable to generate bid for activity ".concat(t.id,", no dispatch services available")),o.abrupt("return");case 10:if(t.type!==T.Transmutation){o.next=14;break}return console.log("Dispatch service will generate quote for this transmutation activity"),o.next=14,Object(v.d)(ye({serviceProvider:i,activity:t}));case 14:case"end":return o.stop()}}),Tt)}function zt(e){var t,a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.payload.serviceProvider.type===V.Dispatch){r.next=2;break}return r.abrupt("return");case 2:return t=e.payload.serviceProvider,(a=e.payload.activity).started=new Date,console.log("Dispatch service ".concat(t.id," starting to execute transmutation activity ").concat(a.id)),r.next=8,Object(v.b)(1e3);case 8:return a.completed=new Date,r.next=11,Object(v.d)(he(a));case 11:case"end":return r.stop()}}),Rt)}function Mt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(fe.type,It);case 2:case"end":return e.stop()}}),Ct)}function Vt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.g)(be.type,zt);case 2:case"end":return e.stop()}}),Ft)}var Dt=l.a.mark(Ht),Ut=l.a.mark(Lt);function Ht(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.c)(ut),Object(v.c)(wt),Object(v.c)(qt),Object(v.c)(Mt)]);case 2:case"end":return e.stop()}}),Dt)}function Lt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.c)(dt),Object(v.c)(Et),Object(v.c)(At),Object(v.c)(Vt)]);case 2:case"end":return e.stop()}}),Ut)}var Gt=Object(u.b)({name:"information",initialState:{informationOverlayVisible:!1},reducers:{showInformationOverlay:function(e,t){e.informationOverlayVisible=!0},hideInformationOverlay:function(e,t){e.informationOverlayVisible=!1}}}),Wt=Gt.actions,Qt=Wt.showInformationOverlay,_t=Wt.hideInformationOverlay,Kt=Gt.reducer,Jt=l.a.mark(Yt);function Yt(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.c)(w),Object(v.c)(Ce),Object(v.c)(Ie),Object(v.c)(et),Object(v.c)(rt),Object(v.c)(Ht),Object(v.c)(Lt)]);case 2:case"end":return e.stop()}}),Jt)}var $t=Object(m.a)(),Xt=Object(d.combineReducers)({textile:x,market:Ne,factory:xe,selected:Qe,information:Kt,form:Me.a}),Zt=Object(u.a)({reducer:Xt,middleware:[$t]});$t.run(Yt);var ea=a(1755),ta=a(1754),aa=a(1757),ra=a(1763),na=a(1749),ia=a(1740),oa=a(658),ca=function(e){return e.textile.detailsVisible},sa=function(e){var t;return null===(t=e.textile.user)||void 0===t?void 0:t.privateKey.toString()},la=function(e){return e.information.informationOverlayVisible},ua=function(e){return e.selected},da=Object(F.a)([ua],(function(e){return e.marketFactoryPanelVisibilty})),ma=Object(F.a)([ua],(function(e){return e.primaryFocusBuildRequestId})),va=Object(F.a)([W,ma],(function(e,t){if(t)return e.find((function(e){return e.id===t}))})),pa=Object(F.a)([va],(function(e){if(e)return e.workflow})),fa=Object(F.a)([pa],(function(e){if(e){for(var t=[],a=e.firstActivity;a;)t.push(a),a=a.nextActivity;return t}})),ya=Object(F.a)([ua],(function(e){return e.selectedServiceProviderId})),ba=Object(F.a)([_,ya],(function(e,t){if(t)return e.find((function(e){return e.id===t}))})),ha=Object(F.a)([ba],(function(e){if(e)return e})),ga=Object(F.a)([ha],(function(e){if(e)return e.location})),xa=Object(F.a)([ha],(function(e){if(e)return e.orientation})),Oa=(Object(F.a)([ha],(function(e){if(e)return e.bounds})),a(1743)),wa=a(1746),Ea=a(1745),ja=a(1747),ka=a(1748);var Sa=Object(c.c)(null,(function(e){return{}})),Pa=Object(ia.a)((function(e){return{container:{padding:e.spacing(2)},title:{fontSize:14},subTitle:{marginBottom:e.spacing(2)},footer:{marginTop:e.spacing(2)}}}));var Na=Sa((function(e){var t=Pa(),a=e.activity;return n.a.createElement(Oa.a,{className:t.container},n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Activity"),n.a.createElement(Ea.a,null,a.displayName),n.a.createElement(Ea.a,{className:t.subTitle,color:"textSecondary"},a.id),n.a.createElement(Ea.a,{color:"textSecondary"},"Type: ",a.type.toString()),n.a.createElement(Ea.a,{color:"textSecondary"},"Started:"," ",a.started?a.started.toLocaleTimeString():"Not started..."),n.a.createElement(Ea.a,{color:"textSecondary"},"Completed:"," ",a.completed?a.completed.toLocaleTimeString():"Not completed..."),n.a.createElement(Ea.a,{color:"textSecondary"},"Assigned Service Provider:"," ",a.serviceProvider?a.serviceProvider.displayName:"Not assigned to service provider..."))}));var Ba=Object(c.c)((function(e){return{buildRequest:va(e),orderedActivities:fa(e)}}),(function(e){return{onCloseClicked:function(){e(He())}}})),qa=Object(ia.a)((function(e){return{container:{margin:e.spacing(2),flexGrow:1,overflow:"auto",maxHeight:"80vh"},internalContainer:{margin:e.spacing(1),padding:e.spacing(1)},title:{fontSize:14},pos:{marginBottom:12}}}));var Aa=Ba((function(e){var t=qa(),a=e.buildRequest,r=e.orderedActivities,i=e.onCloseClicked;if(!a)return n.a.createElement(Oa.a,{className:t.container},n.a.createElement(wa.a,null,n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"No selected build request (You probably should not be seeing this)")),n.a.createElement(ja.a,null,n.a.createElement(ka.a,{color:"primary",size:"small",onClick:i},"Close")));var o=a.id,c=a.displayName,s=a.created,l=a.material,u=a.endShape,d=a.scale,m=a.fixedValue,v=a.workflow,p=function(){return v&&r&&r.length>0?n.a.createElement(Oa.a,{className:t.internalContainer},n.a.createElement(Ea.a,{variant:"h5",component:"h2",className:t.pos},v.displayName),r.map((function(e){return n.a.createElement(Na,{key:e.id,activity:e})}))):n.a.createElement(Ea.a,{color:"textSecondary"},"Generating...")};return n.a.createElement(Oa.a,{className:t.container},n.a.createElement(wa.a,null,n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Build Request Details"),n.a.createElement(Ea.a,{variant:"h5",component:"h2"},c),n.a.createElement(Ea.a,{className:t.pos,color:"textSecondary"},o),n.a.createElement(aa.a,null,n.a.createElement(Ea.a,{color:"textPrimary"},"Created: ",s.toLocaleTimeString()),n.a.createElement(Ea.a,{color:"textPrimary"},"Value: $",m.value.dollars),n.a.createElement(Ea.a,{color:"textPrimary"},"Material: ",l.type.toString()),n.a.createElement(Ea.a,{color:"textPrimary"},"Shape: ",u.toString()),n.a.createElement(Ea.a,{color:"textPrimary"},"Scale: ",d,"m")),n.a.createElement(p,null)),n.a.createElement(ja.a,null,n.a.createElement(ka.a,{color:"primary",size:"small",onClick:i},"Close")))})),Ta=a(28),Ra=a(5),Ca=a(101),Fa=Object(F.a)([ha],(function(e){if(e)return{position:new Ra.Vector3(e.location.x,e.location.y-2,5),lookAt:new Ra.Vector3(e.location.x,e.location.y,e.location.z),screenSpaceBounds:new Ra.Box2(new Ra.Vector2(2*e.bounds.min.x,2*e.bounds.min.y),new Ra.Vector2(2*e.bounds.max.x,2*e.bounds.max.y))}})),Ia=a(215),za=a(659);function Ma(e){var t=Object(Ca.g)(),a=t.gl,i=t.camera;i.up.set(0,0,1);var o=Object(r.useRef)(),c=e.cameraTarget,s=Object(r.useState)(!1),l=Object(Ta.a)(s,2),u=l[0],d=l[1],m=Object(Ia.c)({springyCameraPos:[c?c.position.x:i.position.x,c?c.position.y:i.position.y,c?c.position.z:i.position.z],springyCameraLookAt:[c?c.lookAt.x:o.current?o.current.target.x:0,c?c.lookAt.y:o.current?o.current.target.y:0,c?c.lookAt.z:o.current?o.current.target.z:0],onStart:function(){d(!0)},onRest:function(){d(!1)}}),v=m.springyCameraPos,p=m.springyCameraLookAt;return Object(Ca.f)((function(){if(c&&u){var e=v.getValue(),t=p.getValue();e&&t&&o.current&&(i.position.set(e[0],e[1],e[2]),o.current.target.set(t[0],t[1],t[2]),o.current.update())}})),n.a.createElement("orbitControls",{ref:o,args:[i,a.domElement],maxPolarAngle:Math.PI/4})}Object(Ca.d)({OrbitControls:za.a});var Va=a(404);function Da(e){var t=e.gridSize,a=e.position,i=a.x,o=a.y,c=Object(r.useRef)(),s=Object(r.useState)(new Ra.Vector3(0,0,0)),l=Object(Ta.a)(s,2),u=l[0],d=l[1];Object(r.useMemo)((function(){d(new Ra.Vector3(Math.floor(i/t)+t/2,Math.floor(o/t)+t/2,0))}),[t,i,o]);var m=Object(Ia.c)({springycursorPostion:[u.x,u.y,u.z]}).springycursorPostion;return n.a.createElement(Va.a.mesh,{position:m,ref:c},n.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,.2]}),n.a.createElement("meshBasicMaterial",{attach:"material",color:"royalblue"}))}function Ua(){return n.a.createElement("group",null,n.a.createElement("ambientLight",{intensity:.3}),n.a.createElement("spotLight",{castShadow:!0,color:new Ra.Color(16768477),intensity:.4,angle:Math.PI/7,position:[10,10,15],penumbra:2,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),n.a.createElement("pointLight",{color:new Ra.Color(14540287),intensity:.2}))}function Ha(e){var t=Object(r.useRef)(),a=e.largeX,i=e.largeY,o=e.onHover,c=e.onSelected;return n.a.createElement("mesh",{receiveShadow:!0,position:[0,0,-.1],ref:t,onPointerMove:function(e){e.stopPropagation(),o(e)},onClick:function(e){e.stopPropagation(),c()}},n.a.createElement("planeBufferGeometry",{attach:"geometry",args:[a,i]}),n.a.createElement("meshStandardMaterial",{attach:"material",color:"lightgrey"}))}function La(e){var t=Object(r.useRef)(),a=e.floorSpace,i=a.id,o=a.location,c=a.orientation,s=a.bounds,l=Object(r.useState)(new Ra.Euler(0,0,0)),u=Object(Ta.a)(l,2),d=u[0],m=u[1];Object(r.useMemo)((function(){var e=new Ra.Euler(0,0,0);e.setFromQuaternion(new Ra.Quaternion(c.x,c.y,c.z,c.w)),m(e)}),[c]);return n.a.createElement("mesh",{castShadow:!0,receiveShadow:!0,position:[o.x,o.y,o.z-.05],rotation:d,ref:t,onClick:function(t){t.stopPropagation(),e.onSelected(i)}},n.a.createElement("boxBufferGeometry",{attach:"geometry",args:[s.max.x-s.min.x,s.max.y-s.min.y,.1]}),n.a.createElement("meshStandardMaterial",{attach:"material",color:"grey"}))}var Ga=a(63),Wa=a(76),Qa=a(665),_a=n.a.createContext(void 0),Ka=["id","uuid","type","children","parent","matrix","matrixWorld","matrixWorldNeedsUpdate","modelViewMatrix","normalMatrix"];function Ja(e){var t=Object(X.a)({},e);return Ka.forEach((function(e){return delete t[e]})),Object.keys(t).forEach((function(e){return"function"===typeof t[e]&&delete t[e]})),t.material&&(t.material=Ja(t.material)),t.geometry&&(t.geometry=Ja(t.geometry)),t}var Ya=function(e){var t=Object(r.useContext)(_a),a=Object(r.useState)(void 0),n=Object(Ta.a)(a,2),i=n[0],o=n[1];Object(r.useEffect)((function(){var a=function(){var t=Object(Ga.a)(l.a.mark((function t(a){var r,n,i,c,s,u,d,m;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=!0,i=!1,t.prev=3,s=Object(Wa.a)(a.cat(e));case 5:return t.next=7,s.next();case 7:return u=t.sent,n=u.done,t.next=11,u.value;case 11:if(d=t.sent,n){t.next=19;break}m=d,r.push(m),console.log("Got model chunk...");case 16:n=!0,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(3),i=!0,c=t.t0;case 25:if(t.prev=25,t.prev=26,n||null==s.return){t.next=30;break}return t.next=30,s.return();case 30:if(t.prev=30,!i){t.next=33;break}throw c;case 33:return t.finish(30);case 34:return t.finish(25);case 35:console.log("All chunks downloaded! length: "+r.length),o(r);case 37:case"end":return t.stop()}}),t,null,[[3,21,25,35],[26,,30,34]])})));return function(e){return t.apply(this,arguments)}}();t&&a(t)}),[t,e]);var c=Object(r.useState)(),s=Object(Ta.a)(c,2),u=s[0],d=s[1];return Object(r.useEffect)((function(){i&&function(){var e=Object(Ga.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new Qa.a).parse(i[0],"",(function(e){var t=[],a={},r={};e.scene.traverse((function(e){t.push(Ja(e)),e.name&&(a=Object(X.a)(Object(X.a)({},a),{},Object($.a)({},e.name,e))),e.material&&!r[e.material.name]&&(r[e.material.name]=e.material)})),d(Object(X.a)(Object(X.a)({},e),{},{nodes:a,materials:r}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i]),u},$a=function(){return n.a.createElement("mesh",null,n.a.createElement("boxBufferGeometry",{attach:"geometry"}))};function Xa(e){var t=Object(r.useRef)(),a=Ya("QmQZDpCFgiUtZwzi3UUKWUHUS44kqA25z8SKoo98MrLaPS");if(a){var i=a.nodes,o=a.materials;return n.a.createElement("group",Object.assign({ref:t},e,{dispose:null}),n.a.createElement("mesh",{material:o._defaultMat,geometry:i.mergedBlocks.geometry}))}return $a()}function Za(e){var t=e.humanWorker,a=t.id,i=t.location,o=t.orientation,c=Object(r.useState)(new Ra.Euler(0,0,0)),s=Object(Ta.a)(c,2),l=s[0],u=s[1];return Object(r.useMemo)((function(){var e=new Ra.Euler(0,0,0);e.setFromQuaternion(new Ra.Quaternion(o.x,o.y,o.z,o.w)),u(e)}),[o]),n.a.createElement(r.Suspense,{fallback:null},n.a.createElement(Xa,{position:[i.x,i.y,i.z],rotation:l,onClick:function(t){t.stopPropagation(),e.onSelected(a)}}))}function er(e){var t=Object(r.useRef)(),a=Ya("QmbdSeJfWsUm5ghb9pp98qwnbTbzKN8BvtarJhRTmTxhCw");if(a){var i=a.nodes,o=a.materials;return n.a.createElement("group",Object.assign({ref:t},e,{dispose:null}),n.a.createElement("mesh",{material:o.custom2,geometry:i.mergedBlocks_1_0.geometry}),n.a.createElement("mesh",{material:o.custom1,geometry:i.mergedBlocks_1_1.geometry}),n.a.createElement("mesh",{material:o.custom3,geometry:i.mergedBlocks_1_2.geometry}),n.a.createElement("mesh",{material:o._defaultMat,geometry:i.mergedBlocks_1_3.geometry}))}return $a()}function tr(e){var t=e.fffPrinter,a=t.id,i=t.location,o=t.orientation,c=Object(r.useState)(new Ra.Euler(0,0,0)),s=Object(Ta.a)(c,2),l=s[0],u=s[1];return Object(r.useMemo)((function(){var e=new Ra.Euler(0,0,0);e.setFromQuaternion(new Ra.Quaternion(o.x,o.y,o.z,o.w)),u(e)}),[o]),n.a.createElement(r.Suspense,{fallback:null},n.a.createElement(er,{position:[i.x,i.y,i.z],rotation:l,onClick:function(t){t.stopPropagation(),e.onSelected(a)}}))}function ar(e){var t=Object(r.useRef)(),a=e.procurementService,i=a.id,o=a.location,c=a.orientation,s=a.bounds,l=Object(r.useState)(new Ra.Euler(0,0,0)),u=Object(Ta.a)(l,2),d=u[0],m=u[1];return Object(r.useMemo)((function(){var e=new Ra.Euler(0,0,0);e.setFromQuaternion(new Ra.Quaternion(c.x,c.y,c.z,c.w)),m(e)}),[c]),n.a.createElement("group",null,n.a.createElement("mesh",{castShadow:!0,receiveShadow:!0,position:[o.x,o.y,o.z],rotation:d,ref:t,onClick:function(t){t.stopPropagation(),e.onSelected(i)}},n.a.createElement("boxBufferGeometry",{attach:"geometry",args:[s.max.x-s.min.x,s.max.y-s.min.y,s.max.z-s.min.z]}),n.a.createElement("meshStandardMaterial",{attach:"material",color:"grey"})))}function rr(e){var t=Object(r.useRef)(),a=e.dispatchService,i=a.id,o=a.location,c=a.orientation,s=a.bounds,l=Object(r.useState)(new Ra.Euler(0,0,0)),u=Object(Ta.a)(l,2),d=u[0],m=u[1];return Object(r.useMemo)((function(){var e=new Ra.Euler(0,0,0);e.setFromQuaternion(new Ra.Quaternion(c.x,c.y,c.z,c.w)),m(e)}),[c]),n.a.createElement("mesh",{castShadow:!0,receiveShadow:!0,position:[o.x,o.y,o.z],rotation:d,ref:t,onClick:function(t){t.stopPropagation(),e.onSelected(i)}},n.a.createElement("boxBufferGeometry",{attach:"geometry",args:[s.max.x-s.min.x,s.max.y-s.min.y,s.max.z-s.min.z]}),n.a.createElement("meshStandardMaterial",{attach:"material",color:"grey"}))}var nr=Object(c.c)((function(e){return{}}),(function(e){return{onSelected:function(t){e(We(t))}}}))((function(e){var t=Object(r.useRef)(),a=e.serviceProvider,i=a.id,o=a.location;switch(a.type){case V.Floorspace:return n.a.createElement(La,{floorSpace:a,onSelected:e.onSelected});case V.Procurement:return n.a.createElement(ar,{procurementService:a,onSelected:e.onSelected});case V.HumanWorker:return n.a.createElement(Za,{humanWorker:a,onSelected:e.onSelected});case V.FFFPrinter:return n.a.createElement(tr,{fffPrinter:a,onSelected:e.onSelected});case V.Dispatch:return n.a.createElement(rr,{dispatchService:a,onSelected:e.onSelected});default:return n.a.createElement("mesh",{position:[o.x,o.y,o.z],ref:t,onClick:function(t){t.stopPropagation(),e.onSelected(i)}},n.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),n.a.createElement("meshStandardMaterial",{attach:"material",color:"red"}))}}));var ir=Object(c.c)((function(e){return{cameraTarget:Fa(e),servicesProviders:_(e)}}),(function(e){return{onBasePlaneSelected:function(){e(Ge())},onInputRegionSelected:function(){console.log("Input region selected")},onOutputRegionSelected:function(){console.log("Output region selected")}}}))((function(e){var t=e.cameraTarget,a=e.servicesProviders,i=e.onBasePlaneSelected,o=Object(r.useState)(new Ra.Vector3(0,0,0)),s=Object(Ta.a)(o,2),l=s[0],u=s[1];return n.a.createElement(c.b.Consumer,null,(function(e){var r=e.store;return n.a.createElement(_a.Consumer,null,(function(e){return n.a.createElement(Ca.a,{shadowMap:!0},n.a.createElement(c.a,{store:r},n.a.createElement(_a.Provider,{value:e},n.a.createElement(Ma,{cameraTarget:t}),n.a.createElement(Ua,null),n.a.createElement(Ha,{largeX:100,largeY:100,onHover:function(e){return u(e.point)},onSelected:i}),n.a.createElement(Da,{gridSize:1,position:l}),a.map((function(e){return n.a.createElement(nr,{key:e.id,serviceProvider:e})})))))}))}))}));var or=Object(c.c)((function(e){return{buildRequests:W(e),isAllowedToBid:Q(e)}}),(function(e){return{onActiveBuildRequestSelected:function(t){e(Le(t))}}})),cr=Object(ia.a)((function(e){return{container:{flexGrow:1},title:{fontSize:14},comment:{fontSize:12}}}));var sr=or((function(e){var t=cr(),a=e.buildRequests,r=e.isAllowedToBid,i=e.onActiveBuildRequestSelected;return n.a.createElement(Oa.a,{className:t.container},n.a.createElement(wa.a,null,n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Active Build Requests"),r?n.a.createElement("div",null):n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"(at max factory capacity: ",j.factory.maxNumberActiveBuilds,")"),a.length>0?a.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(Ea.a,{color:"textPrimary"},e.displayName),n.a.createElement(Ea.a,{color:"textSecondary",gutterBottom:!0},e.id),n.a.createElement(ka.a,{variant:"contained",color:"primary",size:"small",onClick:function(t){return i(e.id)}},"Details"))})):n.a.createElement(Ea.a,{className:t.comment,color:"textPrimary",gutterBottom:!0},"No active build requests... Bid from the market panel?")))}));var lr=Object(c.c)((function(e){return{factoryEconomicSummary:J(e)}}),(function(e){return{}})),ur=Object(ia.a)((function(e){return{container:{flexGrow:1},title:{fontSize:14}}}));var dr=lr((function(e){var t=ur(),a=e.factoryEconomicSummary;return n.a.createElement(Oa.a,{className:t.container},n.a.createElement(wa.a,null,n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Economic Summary"),n.a.createElement(Ea.a,{color:"textPrimary"},"Liquid Assets:"," ",N.format(a.currentAssetsValue.value.dollars)),n.a.createElement(Ea.a,{color:"textPrimary"},"Total In:"," ",N.format(a.totalIn.value.dollars)),n.a.createElement(Ea.a,{color:"textPrimary"},"Total Out:"," ",N.format(a.totalOut.value.dollars))))}));var mr=Object(c.c)((function(e){return{factoryIdentity:L(e)}}),(function(e){return{onCloseClicked:function(){e(Ue(ze.None))}}})),vr=Object(ia.a)((function(e){return{container:{margin:e.spacing(2),flexGrow:1,overflow:"auto",maxHeight:"90vh"},title:{fontSize:14},pos:{marginBottom:12}}}));var pr=mr((function(e){var t=vr(),a=e.factoryIdentity,r=e.onCloseClicked;return n.a.createElement(Oa.a,{className:t.container},n.a.createElement(wa.a,null,n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Factory Overview"),n.a.createElement(Ea.a,{variant:"h5",component:"h2"},a.displayName),n.a.createElement(Ea.a,{className:t.pos,color:"textSecondary"},a.id),n.a.createElement(dr,null),n.a.createElement(sr,null)),n.a.createElement(ja.a,null,n.a.createElement(ka.a,{color:"primary",size:"small",onClick:r},"Close")))})),fr=a(666),yr=a.n(fr),br=a(667),hr=a.n(br),gr=Object(ia.a)((function(e){return{InformationOverlay:{width:"50%",padding:e.spacing(2)}}}));function xr(){var e=gr(),t=Object(r.useState)("Retriving release information..."),a=Object(Ta.a)(t,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(Ga.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yr()(j.information.gitHubAPILatestReleaseEndPoint);case 2:200===(t=e.sent).status?(a=t.data,o(a.body)):o("Unabled to get release information :( (status: ".concat(t.status,")"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),n.a.createElement(Oa.a,{id:"InformationOverlay",className:e.InformationOverlay},n.a.createElement(hr.a,{source:i}))}var Or=Object(ia.a)((function(e){return{UserDetailsOverlay:{width:"75%",padding:e.spacing(2)}}}));var wr=Object(c.c)((function(e){return{userIdentityPublicKey:sa(e)}}))((function(e){var t=Or(),a=e.userIdentityPublicKey;return n.a.createElement(Oa.a,{id:"UserDetailsOverlay",className:t.UserDetailsOverlay},n.a.createElement(wa.a,null,n.a.createElement(Ea.a,null,"Public Key",n.a.createElement("br",null),a)))})),Er=a(408);var jr=Object(c.c)(null,(function(e){return{onBidClicked:function(t){e(ke(t))}}})),kr=Object(ia.a)((function(e){return{root:{position:"relative",width:"100%",padding:e.spacing(2)},title:{fontSize:14},subTitle:{fontSize:11,marginBottom:e.spacing(2)},footer:{marginTop:e.spacing(2)},comment:{fontSize:11}}}));var Sr=jr((function(e){var t=kr(),a=e.isAllowedToBid,r=e.onBidClicked,i=e.buildRequest,o=i.id,c=i.displayName,s=i.created,l=i.fixedValue;return n.a.createElement(Oa.a,{className:t.root},n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Build Request"),n.a.createElement(Ea.a,{variant:"h5",component:"h2"},c),n.a.createElement(Ea.a,{className:t.subTitle,color:"textSecondary"},o),n.a.createElement(Ea.a,{color:"textSecondary"},"Created: ",s.toLocaleTimeString()),n.a.createElement(na.a,{className:t.footer,container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement(na.a,{item:!0},n.a.createElement(ka.a,{variant:"contained",color:"primary",size:"small",onClick:function(t){return r(e.buildRequest)},disabled:!a},"Bid")),n.a.createElement(na.a,{item:!0},n.a.createElement(Ea.a,{color:"textSecondary"},"Value: $",l.value.dollars))),!a&&n.a.createElement(Ea.a,{className:t.comment,color:"textSecondary"},"Bidding disabled - factory at max capacity"))}));var Pr=Object(c.c)((function(e){return{buildRequests:we(e),isAllowedToBid:Q(e)}})),Nr=Object(ia.a)((function(e){return{container:{padding:e.spacing(2),flexGrow:1,width:"100%",overflow:"auto",maxHeight:"80vh"},card:{position:"absolute",paddingRight:e.spacing(4)}}}));var Br=Pr((function(e){var t=Nr(),a=e.buildRequests,i=e.isAllowedToBid,o=e.width,c=Object(r.useState)(240),s=Object(Ta.a)(c,1)[0],l=0,u=Object(Er.b)(a.map((function(e){return Object(X.a)(Object(X.a)({},e),{},{y:(l+=s)-s,height:s})})),(function(e){return e.id}),{from:{height:0,opacity:0},leave:{height:0,opacity:0},enter:function(e){return{y:e.y,height:e.height,opacity:1}},update:function(e){return{y:e.y,height:e.height}},config:{tension:500}});return n.a.createElement(aa.a,{className:t.container},u.map((function(e){var a=e.item,r=e.props,c=e.key;return n.a.createElement(Er.a.div,{key:c,className:t.card,style:{transform:r.y.interpolate((function(e){return"translate3d(0,".concat(e,"px,0)")})),opacity:r.opacity,height:r.height,width:null===o?void 0:o}},n.a.createElement(Sr,{isAllowedToBid:i,buildRequest:a}))})))}));var qr=Object(c.c)((function(e){return{selected:ba(e)}})),Ar=Object(ia.a)((function(e){return{pos:{marginBottom:12}}}));var Tr,Rr=qr((function(e){var t=e.selected,a=Ar();return t?n.a.createElement("div",null,n.a.createElement(Ea.a,{variant:"h5",component:"h2"},t.displayName),n.a.createElement(Ea.a,{className:a.pos,color:"textSecondary"},t.id)):null})),Cr=a(1759),Fr=a(1758);function Ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=void 0===t?S():t,r=e.displayName,n=void 0===r?"default-number-parameter":r,i=e.units,o=void 0===i?"":i,c=e.value,s=void 0===c?0:c;return{type:Tr.Number,id:a,displayName:n,units:o,value:s}}!function(e){e[e.String=0]="String",e[e.Number=1]="Number"}(Tr||(Tr={}));var zr=a(1756),Mr=Object(ia.a)((function(e){return{field:{margin:e.spacing(1),flexGrow:1}}}));function Vr(e){var t=e.input,a=e.displayName,r=Mr();return n.a.createElement(zr.a,Object.assign({className:r.field,label:a},t))}var Dr=a(1762),Ur=a(1750),Hr=a(1751),Lr=a(277),Gr=a.n(Lr);var Wr=Object(c.c)((function(e){return{selectedServiceProvider:ba(e),initialValues:ga(e)}}),(function(e){return{onNumberParameterChange:function(t,a,r,n){console.log("Parameter ".concat(r.target.name," Changed to ").concat(r.target.value)),e(ge({serviceProviderId:t,serviceProviderProperty:a,parameter:Ir({id:r.target.name,displayName:r.target.name,units:n,value:Number(r.target.value)})}))}}}))(Object(Fr.a)({form:"locationForm",enableReinitialize:!0})((function(e){var t=e.selectedServiceProvider,a=e.onNumberParameterChange;if(!t)return n.a.createElement("div",null);var r="Location",i="location",o="m";return n.a.createElement(Dr.a,null,n.a.createElement(Ur.a,{expandIcon:n.a.createElement(Gr.a,null),"aria-controls":i,id:i},n.a.createElement(Ea.a,null,r)),n.a.createElement(Hr.a,null,n.a.createElement("form",null,n.a.createElement(na.a,{container:!0},Object.keys(t.location).map((function(e){return n.a.createElement(na.a,{key:e,item:!0,xs:4},n.a.createElement(Cr.a,{name:e,displayName:"".concat(e.toUpperCase()," (").concat(o,")"),component:Vr,type:"number",parse:function(e){return Number(e)},onChange:function(r){return a(t.id,[i,e],r,o)}}))}))))))})));var Qr=Object(c.c)((function(e){return{selectedServiceProvider:ba(e),initialValues:xa(e)}}),(function(e){return{onNumberParameterChange:function(t,a,r,n){console.log("Parameter ".concat(r.target.name," Changed to ").concat(r.target.value)),e(ge({serviceProviderId:t,serviceProviderProperty:a,parameter:Ir({id:r.target.name,displayName:r.target.name,units:n,value:Number(r.target.value)})}))}}}))(Object(Fr.a)({form:"orientationForm",enableReinitialize:!0})((function(e){var t=e.selectedServiceProvider,a=e.onNumberParameterChange;if(!t)return n.a.createElement("div",null);var r="Orientation",i="orientation",o="";return n.a.createElement(Dr.a,null,n.a.createElement(Ur.a,{expandIcon:n.a.createElement(Gr.a,null),"aria-controls":i,id:i},n.a.createElement(Ea.a,null,r)),n.a.createElement(Hr.a,null,n.a.createElement("form",null,n.a.createElement(na.a,{container:!0},Object.keys(t.orientation).map((function(e){return n.a.createElement(na.a,{key:e,item:!0,xs:3},n.a.createElement(Cr.a,{name:e,displayName:"".concat(e.toUpperCase()),component:Vr,type:"number",parse:function(e){return Number(e)},onChange:function(r){return a(t.id,[i,e],r,o)}}))}))))))})));var _r=Object(c.c)((function(e){return{selected:ba(e)}})),Kr=Object(ia.a)((function(e){return{container:{margin:e.spacing(2),flexGrow:1,overflow:"auto",maxHeight:"80vh"},title:{fontSize:14},pos:{marginBottom:12}}}));var Jr=_r((function(e){var t=Kr();return e.selected?n.a.createElement(Oa.a,{className:t.container},n.a.createElement(wa.a,null,n.a.createElement(Ea.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Properties"),n.a.createElement(Rr,null),n.a.createElement(Wr,null),n.a.createElement(Qr,null))):n.a.createElement("div",null)})),Yr=a(1752),$r=a(1753),Xr=a(1709),Zr=a(668),en=a.n(Zr),tn=a(670),an=a.n(tn),rn=a(671),nn=a.n(rn),on=a(672),cn=a.n(on),sn=a(669),ln=a.n(sn);var un=Object(c.c)((function(e){return{marketFactoryPanelVisibilty:da(e),factoryIdentity:L(e)}}),(function(e){return{onFactoryClicked:function(){e(Ue(ze.Factory))},onMarketClicked:function(){e(Ue(ze.Market))},onShowInfoPanel:function(){e(Qt())},onShowUserInfo:function(){e(b())}}})),dn=Object(ia.a)((function(e){return{container:{padding:e.spacing(2),flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var mn=un((function(e){var t=dn(),a=e.marketFactoryPanelVisibilty,r=e.factoryIdentity,i=e.onFactoryClicked,o=e.onMarketClicked,c=e.onShowInfoPanel,s=e.onShowUserInfo;return n.a.createElement(aa.a,{className:t.container},n.a.createElement(Yr.a,{position:"static"},n.a.createElement($r.a,null,n.a.createElement(Xr.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"factory",disabled:a===ze.Factory,onClick:i},n.a.createElement(en.a,null)),n.a.createElement(Xr.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"market",disabled:a===ze.Market,onClick:o},n.a.createElement(ln.a,null)),n.a.createElement(Ea.a,{variant:"h6",className:t.title},r.displayName," : ",r.id),n.a.createElement(Xr.a,{color:"inherit","aria-label":"github",href:j.topNav.gitHubURL},n.a.createElement(an.a,null)),n.a.createElement(Xr.a,{color:"inherit","aria-label":"info",onClick:c},n.a.createElement(nn.a,null)),n.a.createElement(Xr.a,{color:"inherit","aria-label":"user",onClick:s},n.a.createElement(cn.a,null)))))})),vn=a(673),pn=a.n(vn),fn=null;var yn=Object(c.c)((function(e){return{informationOverlayVisible:la(e),userIdentityDetailsOverlayVisible:ca(e),marketFactoryPanelVisibilty:da(e),primaryFocusBuildRequest:va(e)}}),(function(e){return{onHideInfoPanel:function(){e(_t())},onHideUserDetailsPanel:function(){e(h())}}})),bn=Object(ia.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.00)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,.1)",outline:"1px solid slategrey"}},fullScreen:{margin:0,height:"100vh",width:"100vw"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff",pointerEvents:"auto"},uiOverlay:{position:"fixed",top:0,left:0,right:0,pointerEvents:"none",height:"100vh",maxHeight:"100vh"},uiPrimaryGridContainer:{justify:"flex-start"},uiPrimaryGridElement:{pointerEvents:"auto"}}}));var hn=yn((function(e){var t=bn(),a=function(){var e=Object(r.useState)(Boolean(fn)),t=Object(Ta.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(null),o=Object(Ta.a)(i,2),c=o[0],s=o[1];return Object(r.useEffect)((function(){function e(){return(e=Object(Ga.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fn){e.next=4;break}console.log("IPFS already started"),e.next=17;break;case 4:return e.prev=4,console.time("IPFS Started"),e.next=8,pn.a.create();case 8:fn=e.sent,console.timeEnd("IPFS Started"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("IPFS init error:",e.t0),fn=null,s(e.t0);case 17:n(Boolean(fn));case 18:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){fn&&fn.stop&&(console.log("Stopping IPFS"),fn.stop().catch((function(e){return console.error(e)})),fn=null,n(!1))}}),[]),{ipfs:fn,isIpfsReady:a,ipfsInitError:c}}().ipfs,i=e.informationOverlayVisible,o=e.userIdentityDetailsOverlayVisible,c=e.marketFactoryPanelVisibilty,s=e.primaryFocusBuildRequest,u=e.onHideInfoPanel,d=e.onHideUserDetailsPanel,m=function(){switch(c){case ze.Factory:return n.a.createElement(na.a,{item:!0,xs:3},n.a.createElement(aa.a,{className:t.uiPrimaryGridElement},n.a.createElement(pr,null)));case ze.Market:return n.a.createElement(na.a,{item:!0,xs:3},n.a.createElement(oa.SizeMe,null,(function(e){var a=e.size;return n.a.createElement(aa.a,{className:t.uiPrimaryGridElement},n.a.createElement(Br,{height:a.height,width:a.width}))})));default:return n.a.createElement(na.a,{item:!0,xs:3})}},v=function(){return s?n.a.createElement(na.a,{item:!0,xs:6},n.a.createElement(aa.a,{className:t.uiPrimaryGridElement},n.a.createElement(Aa,null))):n.a.createElement(na.a,{item:!0,xs:6})};return n.a.createElement(_a.Provider,{value:a},n.a.createElement(aa.a,{className:t.fullScreen},n.a.createElement(ir,null),n.a.createElement(aa.a,{className:t.uiOverlay},n.a.createElement(na.a,{container:!0,className:t.uiPrimaryGridContainer},n.a.createElement(na.a,{item:!0,xs:12},n.a.createElement("div",{className:t.uiPrimaryGridElement},n.a.createElement(mn,null))),n.a.createElement(m,null),n.a.createElement(v,null),n.a.createElement(na.a,{item:!0,xs:3},n.a.createElement("div",{className:t.uiPrimaryGridElement},n.a.createElement(Jr,null)))),n.a.createElement(ra.a,{className:t.backdrop,open:i,onClick:u},n.a.createElement(xr,null)),n.a.createElement(ra.a,{className:t.backdrop,open:o,onClick:d},n.a.createElement(wr,null)))))})),gn=a(280),xn=a(674),On=Object(xn.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:gn.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(c.a,{store:Zt},n.a.createElement(ta.a,{theme:On},n.a.createElement(ea.a,null),n.a.createElement(hn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},324:function(e,t){},703:function(e,t){},816:function(e,t){}},[[1708,1,2]]]);
//# sourceMappingURL=main.aa593b70.chunk.js.map